<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1001px" height="604px" viewBox="-0.5 -0.5 1001 604" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-03-14T01:21:03.942Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.99 Safari/537.36&quot; etag=&quot;Pox4TA9BbzdurI0r2GBV&quot; version=&quot;16.6.4&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;9uyJX09nNnovxR0Th2E_&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://app.diagrams.net/?mode=github#Hcdwxw%2Fcdwxw%2Fmain%2F%E6%8E%A8%E5%8D%95%E6%B5%81%E7%A8%8B.svg"><defs><clipPath id="mx-clip-4-191-432-54-0"><rect x="4" y="191" width="432" height="54"/></clipPath><clipPath id="mx-clip-4-311-432-54-0"><rect x="4" y="311" width="432" height="54"/></clipPath><clipPath id="mx-clip-564-471-432-134-0"><rect x="564" y="471" width="432" height="134"/></clipPath><clipPath id="mx-clip-564-311-432-94-0"><rect x="564" y="311" width="432" height="94"/></clipPath></defs><g><path d="M 220 40 L 220 73.63" fill="none" stroke="#09555b" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 220 78.88 L 216.5 71.88 L 220 73.63 L 223.5 71.88 Z" fill="#09555b" stroke="#09555b" stroke-miterlimit="10" pointer-events="all"/><path d="M 240 0 C 251.05 0 260 8.95 260 20 C 260 25.3 257.89 30.39 254.14 34.14 C 250.39 37.89 245.3 40 240 40 L 200 40 C 188.95 40 180 31.05 180 20 C 180 8.95 188.95 0 200 0 Z" fill="#fad9d5" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 20px; margin-left: 220px;"><div data-drawio-colors="color: #1A1A1A; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(26, 26, 26); line-height: 1.2; pointer-events: all; white-space: nowrap;">开始创单</div></div></div></foreignObject><text x="220" y="24" fill="#1A1A1A" font-family="Helvetica" font-size="12px" text-anchor="middle">开始创单</text></switch></g><path d="M 220 120 L 220 153.63" fill="none" stroke="#09555b" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 220 158.88 L 216.5 151.88 L 220 153.63 L 223.5 151.88 Z" fill="#09555b" stroke="#09555b" stroke-miterlimit="10" pointer-events="all"/><rect x="0" y="80" width="440" height="40" fill="#fad9d5" stroke="#d0cee2" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 100px; margin-left: 1px;"><div data-drawio-colors="color: #1A1A1A; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(26, 26, 26); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">校验参数</div></div></div></foreignObject><text x="220" y="104" fill="#1A1A1A" font-family="Helvetica" font-size="12px" text-anchor="middle">校验参数</text></switch></g><path d="M 0 186 L 0 160 L 440 160 L 440 186" fill="#fad9d5" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 186 L 0 240 L 440 240 L 440 186" fill="none" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 186 L 440 186" fill="none" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><g fill="#1A1A1A" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="219.5" y="177.5">校验下单</text></g><g fill="#1A1A1A" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-191-432-54-0)" font-size="12px"><text x="5.5" y="203.5">获取订单下单配置（数据库I/O）</text></g><path d="M 0 306 L 0 280 L 440 280 L 440 306" fill="#fad9d5" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 306 L 0 360 L 440 360 L 440 306" fill="none" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 306 L 440 306" fill="none" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><g fill="#1A1A1A" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="219.5" y="297.5">增加绑定信息</text></g><g fill="#1A1A1A" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-311-432-54-0)" font-size="12px"><text x="5.5" y="323.5">提前生成订单ID/订单产品ID/订单产品明细ID（三层循环获取分布式ID）</text></g><path d="M 220 440 L 220 473.63" fill="none" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><path d="M 220 478.88 L 216.5 471.88 L 220 473.63 L 223.5 471.88 Z" fill="#09555b" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><rect x="0" y="480" width="440" height="40" fill="#d5e8d4" stroke="#82b366" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 500px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;">异步生成订单等数据</div></div></div></foreignObject><text x="220" y="504" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">异步生成订单等数据</text></switch></g><path d="M 240 560 C 251.05 560 260 568.95 260 580 C 260 585.3 257.89 590.39 254.14 594.14 C 250.39 597.89 245.3 600 240 600 L 200 600 C 188.95 600 180 591.05 180 580 C 180 568.95 188.95 560 200 560 Z" fill="#fad9d5" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 580px; margin-left: 220px;"><div data-drawio-colors="color: #1A1A1A; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(26, 26, 26); line-height: 1.2; pointer-events: none; white-space: nowrap;">结束</div></div></div></foreignObject><text x="220" y="584" fill="#1A1A1A" font-family="Helvetica" font-size="12px" text-anchor="middle">结束</text></switch></g><path d="M 220 520 L 220 553.63" fill="none" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><path d="M 220 558.88 L 216.5 551.88 L 220 553.63 L 223.5 551.88 Z" fill="#09555b" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><path d="M 220 240 L 220 273.63" fill="none" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><path d="M 220 278.88 L 216.5 271.88 L 220 273.63 L 223.5 271.88 Z" fill="#09555b" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><path d="M 220 360 L 220 393.63" fill="none" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><path d="M 220 398.88 L 216.5 391.88 L 220 393.63 L 223.5 391.88 Z" fill="#09555b" stroke="#09555b" stroke-miterlimit="10" pointer-events="none"/><path d="M 560 466 L 560 440 L 1000 440 L 1000 466" fill="#d5e8d4" stroke="#82b366" stroke-miterlimit="10" pointer-events="none"/><path d="M 560 466 L 560 600 L 1000 600 L 1000 466" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="none"/><path d="M 560 466 L 1000 466" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="779.5" y="457.5">异步生成订单等数据</text></g><g fill="#1A1A1A" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-564-471-432-134-0)" font-size="12px"><text x="565.5" y="483.5">1. 获取商户主体的数据</text><text x="565.5" y="497.5">2. 获取产品中心产品的默认配置</text><text x="565.5" y="511.5">3. 构造除客户单外表数据</text><text x="565.5" y="525.5">4. 将订单产品数据推送给底单中心</text><text x="565.5" y="539.5">5. 订单相关表写入数据</text><text x="565.5" y="553.5">6. 订单生成完成后推送的操作</text><text x="565.5" y="567.5">7. 判断是否进行推送</text><text x="565.5" y="581.5">8. 申请合同以及推送短信、商机、一致性服务数据</text></g><path d="M 440 420 L 560 353" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="none"/><path d="M 440 500 L 560 533" fill="none" stroke="rgb(0, 0, 0)" stroke-width="2" stroke-miterlimit="10" stroke-dasharray="2 6" pointer-events="none"/><path d="M 560 306 L 560 280 L 1000 280 L 1000 306" fill="#fad9d5" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><path d="M 560 306 L 560 400 L 1000 400 L 1000 306" fill="none" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><path d="M 560 306 L 1000 306" fill="none" stroke="#d0cee2" stroke-miterlimit="10" pointer-events="none"/><g fill="#1A1A1A" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="12px"><text x="779.5" y="297.5">生成客户单</text></g><g fill="#1A1A1A" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-564-311-432-94-0)" font-size="12px"><text x="565.5" y="323.5">1. 组装列表数据</text><text x="565.5" y="337.5">2. 锁定库存（并行任务），异常时释放库存（并行任务）</text><text x="565.5" y="351.5">3. 异步获取产品信息、异步获取优惠券列表（并行任务）</text><text x="565.5" y="365.5">4. 算价、组装数据（并行任务）</text><text x="565.5" y="379.5">5. 新增/更新客户单（数据库I/O）</text></g><rect x="0" y="400" width="440" height="40" fill="#fad9d5" stroke="#d0cee2" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 420px; margin-left: 1px;"><div data-drawio-colors="color: #1A1A1A; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(26, 26, 26); line-height: 1.2; pointer-events: none; white-space: normal; overflow-wrap: normal;"><span>生成客户单</span></div></div></div></foreignObject><text x="220" y="424" fill="#1A1A1A" font-family="Helvetica" font-size="12px" text-anchor="middle">生成客户单</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>